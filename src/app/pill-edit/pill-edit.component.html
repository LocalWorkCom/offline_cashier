<div class="p-3">
  <nav class="inner-header">
    <nav style="--bs-breadcrumb-divider: '>'" aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">الفواتير</li>
        <li class="breadcrumb-item active" aria-current="page">فاتورة</li>
      </ol>
    </nav>
  </nav>
  <div class="d-flex gap-1 mb-3">
    <button class="btn fs-6 rounded-4" (click)="onPrintButtonClick()">
      <i class="fas fa-print ms-1"></i> طباعة الفاتورة
    </button>
    <button class="btn fs-6 bg-success rounded-4" [disabled]="loading" (click)="saveOrder()" *ngIf="
        invoices &&
        invoices.length > 0
      "> <!--  &&
        isShow -->
      <h5 class="mb-0">
        <i *ngIf="!loading" class="fa-solid fa-floppy-disk ms-1"> حفظ التعديلات </i>
        <span *ngIf="loading">
          <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          جارٍ التنفيذ...
        </span>
      </h5>
    </button>

  </div>
  <!--   @if (amountError) {
  <div class="alert alert-danger text-center" role="alert">
    يجب أن يكون مجموع الكاش والفيزا مساويًا لقيمة الطلب: {{ invoices[0].invoice_summary.total_price}}{{
    invoiceSummary[0].currency_symbol }}
  </div>

  } -->
  <div *ngIf="apiErrors.length" class="alert alert-danger mt-2">
    <ul class="mb-0 ps-3">
      <li *ngFor="let err of apiErrors">{{ err }}</li>

    </ul>
  </div>
  @if( this.errr){
  <div class="alert alert-danger mt-2">
    {{ this.errr}}
  </div>
  }


  <p *ngIf="errr == 'لا توجد معاملات غير مدفوعة لهذا الطلب.'" class="main-color text-center fs-4">{{ errr }}</p>
  <div #printedPill class="printed-pill">
    <ng-container>
      <div class="card px-4 py-2 my-2" *ngFor="let item of branchDetails">
        <div class="card-img">
          <img src="assets/images/logo-with-white-bg.png" alt="Placeholder Logo" />
        </div>
        <h5>
          <i class="fas fa-file-alt main-color fs-4 ps-2"></i>معلومات الفرع
        </h5>
        <p class="fw-bold" *ngIf="
            invoices &&
            invoices.length > 0 &&
            invoices[0].order_type === 'Delivery' &&
            isShow
          ">
          حالة الطلب :
          <small class="btn-static-warning badge text-dark">
            <i class="fa-solid fa-location-dot ms-1"></i>
            {{ getTrackingStatusTranslation(trackingStatus) }}
          </small>
        </p>
        <div class="d-flex my-2 gap-4" *ngIf="
    invoices &&
    invoices.length > 0 &&
    invoices[0].order_type === 'Delivery'
  "> <!---  &&
    (invoices[0]['tracking-status'] === 'readyForPickup' ||
     invoices[0]['tracking-status'] === 'on_way') -->
          <button class="fs-6 rounded-4 w-50 btn" [ngClass]="{
      'btn-static-main': trackingStatus === 'on_way',
      'btn-transparent border-1': trackingStatus !== 'on_way'
    }" (click)="changeTrackingStatus('on_way')">
            في الطريق
          </button>

          <button class="fs-6 rounded-4 w-50 btn" [ngClass]="{
      'btn-static-main': trackingStatus === 'delivered',
      'btn-transparent border-1': trackingStatus !== 'delivered'
    }" (click)="changeTrackingStatus('delivered')">
            تم التوصيل
          </button>
        </div>

        <p>
          <span class="fw-bold">عنوان الفرع :</span> {{ item.branch_address }}
        </p>
        <div class="d-flex gap-5">
          <p><span class="fw-bold">التاريخ :</span> {{ date }}</p>
          <p><span class="fw-bold">الساعة :</span>{{ time }}</p>
        </div>

        <p>
          <span class="fw-bold">رقم الإيصال :</span> {{ item.invoice_number }}
        </p>
        <p><span class="fw-bold">رقم الطلب :</span> {{ item.order_number }}</p>
        <p *ngIf="
            invoices &&
            invoices.length > 0 &&
            invoices[0].order_type === 'dine-in'
          ">
          <span class="fw-bold">رقم الطاولة :</span> {{ item.table_number }}
        </p>
        <p>
          <span class="fw-bold">رقم التليفون :</span> {{ item.branch_phone }}
        </p>
      </div>
    </ng-container>

    <div class="card px-4 py-2 my-2" *ngIf="
        invoices && invoices.length > 0 && invoices[0].order_type === 'Delivery'
      ">
      <h5>
        <i class="fas fa-file-alt main-color fs-4 ps-2"></i>معلومات التوصيل
      </h5>
      <p v-if="addresDetails.client_name">
        <span class="fw-bold">الاسم :</span>
        {{ addresDetails.client_name }}
      </p>
      <p v-if="addresDetails.client_address || addresDetails.branch_name">
        <span class="fw-bold">العنوان :</span>
        {{ addresDetails.client_address ?? "غير متوفر" }}
        {{ addresDetails.branch_name ?? "" }}
      </p>

      <p v-if="addresDetails.address_phone">
        <span class="fw-bold">رقم الهاتف :</span>
        {{ addresDetails.address_phone }}
      </p>


    </div>

    <div class="card p-2 my-2">
      <div class="accordion accordion-flush" id="accordionFlushExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="flush-headingOne">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
              <h5>
                <i class="fas fa-file-alt main-color fs-4 ps-2"></i> تفاصيل
                الطلب
              </h5>
            </button>
          </h2>
          <div id="flush-collapseOne" class="accordion-collapse collapse show" aria-labelledby="flush-headingOne"
            data-bs-parent="#accordionFlushExample">
            <div class="accordion-body">
              <div *ngFor="let item of orderDetails[0]"
                class="d-flex justify-content-between px-1 mb-1 align-items-start">
                <div class="d-flex flex-column">
                  <h6>
                    <span class="badge bg-lightgray text-dark ms-2">
                      {{ item.quantity }}
                    </span>
                    x
                    <span> {{ item.dish_name }} </span>
                  </h6>
                  <h6 class="text-muted mx-5 fw-medium" *ngIf="item.size">
                    الحجم: {{ item.size }}
                  </h6>
                  <h6 class="text-muted mx-5 fw-medium" *ngIf="item?.addons?.length>0"> الاضافات :
                    <span *ngFor="let addon of item?.addons; let last = last">
                      <span>{{ addon?.addon_name }}<span *ngIf="!last">، </span></span>
                    </span>

                  </h6>
                  <h6 class="text-muted mx-5 fw-medium" *ngIf="item.note">
                    ملاحظات: {{ item.note }}
                  </h6>
                </div>
                <h6 class="fw-bold">
                  <span>{{ item.total_dish_price }}
                    {{ invoiceSummary[0].currency_symbol }}</span>
                </h6>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card px-4 py-2 my-2">
      <h5 class="mb-3"><i class="fas fa-file-alt main-color fs-4 ps-2"></i>معلومات الدفع</h5>
      <div *ngIf="
          invoices &&
          invoices.length > 0 &&
          isShow
        ">
        <div
          *ngIf="invoices[0].order_type === 'Takeaway' ||invoices[0].order_type === 'dine-in' || (invoices[0].order_type === 'Delivery' && Delivery_show_delivered_only)">
          <div class="d-flex gap-4"> <!--  *ngIf="invoices[0].transactions[0].payment_status != 'paid'" ALAAA -->
            <button class="fs-6 rounded-4 w-50 btn" [ngClass]="{
              'btn-static-main text-white': paymentStatus === 'unpaid' || (invoices[0].transactions[0].payment_status === 'unpaid' && paymentStatus !== 'paid'),
              'btn-transparent border-1': paymentStatus !== 'unpaid' || invoices[0].transactions[0].payment_status !== 'unpaid'
            }" (click)="changePaymentStatus('unpaid')">
              غير مدفوعة
            </button>

            <button class="fs-6 rounded-4 w-50 btn" [ngClass]="{
              'btn-static-main text-white': paymentStatus === 'paid' || (invoices[0].transactions[0].payment_status === 'paid' && paymentStatus !== 'unpaid'),
              'btn-transparent border-1': paymentStatus !== 'paid' || invoices[0].transactions[0].payment_status !== 'paid'
            }" (click)="changePaymentStatus('paid')">
              مدفوعة
            </button>
          </div>
        </div>
      </div>
      <div class=" w-100 my-3"
        *ngIf="paymentStatus == 'paid' &&  ( invoices[0]?.order_type =='Takeaway' || invoices[0]?.order_type =='dine-in')">
        <!-- <div class="mb-3 d-flex justify-content-between align-items-center">
          <label for="cash_amount" class="form-label">الكاش : </label>
          <input type="number" class="form-control w-75" id="cash_amount" [(ngModel)]="cash_value">
        </div>
        <div class="mb-3 d-flex justify-content-between align-items-center">
          <label for="credit_amount" class="form-label">الفيزا : </label>
          <input type="number" class="form-control w-75" id="credit_amount" [(ngModel)]="credit_value">
        </div> -->
        <div class="mb-3 row mx-0 justify-content-center align-items-center">
          <div class="col-4 text-center">
            <label class="form-check-label w-100" for="cash_amount">
              <img src="assets/images/money.svg" alt="Cash" /> كاش
            </label>
          </div>
          <div class="col-8">
            <input class="form-control" type="number" id="cash_amount" [(ngModel)]="cash_value" name="cash_value"
              (ngModelChange)="setCashAmount($event)" />
          </div>
        </div>

        <div class="mb-3 row mx-0 justify-content-between align-items-center">
          <div class="col-4 text-center">
            <label class="form-check-label w-100" for="credit_amount">
              <img src="assets/images/visa.svg" alt="Visa" /> الفيزا
            </label>
          </div>
          <div class="col-8">
            <input class="form-control" type="number" id="credit_amount" [(ngModel)]="credit_value"
              name="credit_value" (ngModelChange)="setCreditAmount($event)" />
          </div>
        </div>
        @if (amountError) {
        <div class="alert alert-danger text-center" role="alert">
          يجب أن يكون مجموع الكاش والفيزا مساويًا لقيمة الطلب: {{ invoices[0].invoice_summary.total_price}} {{
          invoices[0].currency_symbol }}
        </div>
        }
        <!-- <div class="total d-flex">
      <p > الاجمالي</p>
      <p >
       <span>{{ invoices[0].invoice_summary.total_price}} {{ invoices[0].currency_symbol }}</span>
      </p>
    </div> -->
      </div>
      <div class="d-flex justify-content-between align-items-center py-3" *ngIf="(invoices && invoices.length > 0) ">
        <h5 class="mb-0" *ngIf="invoices[0]?.transactions?.length == 1">
          <span class="badge bg-success text-white">
            الدفع :
            {{ invoices[0]?.transactions[0].payment_method === "credit" ? "أونلاين" : "كاش" }}
          </span>
        </h5>

        <div class="d-flex align-items-center">
          <p *ngIf="invoices[0].transactions[0].payment_status" class="mb-0 fw-bold">
            {{ invoices[0].transactions[0].payment_status=== "paid" ? "مدفوعة" : "غير مدفوعة" }}
          </p>
        </div>
      </div>
      <!-- Cash - visa -->
      @if(invoices?.length > 0 && invoices[0]?.transactions){
      <div *ngIf="invoices[0]?.transactions?.length>1" class="ps-2">
        <div *ngFor="let inv of invoices[0].transactions">
          <div class="d-flex justify-content-between align-items-center my-1 fw-bold"
            *ngIf="invoices[0].transactions[0].payment_status == 'paid'">
            <div>
              {{ inv.payment_method === 'cash' ? ' الكاش' : ' الفيزا' }}
            </div>
            <div>{{ inv.paid }} {{invoices[0].currency_symbol}}</div>
          </div>

        </div>
      </div>}
      <!-- Cash - visa -->
    </div>

    <div class="card px-4 py-2 my-2" *ngFor="let item of invoiceSummary">
      <h5><i class="fas fa-file-alt main-color fs-4 ps-2"></i> الفاتورة</h5>
      <div class="d-flex justify-content-between px-2 mb-1">
        <h6>مجموع الطلب</h6>

        <h6>
          <span>{{ invoices[0].invoice_summary.subtotal_price_before_coupon.toFixed(2) }}
            {{ item.currency_symbol }}</span>
        </h6>
      </div>

      <div class="d-flex justify-content-between px-2 mb-1 main-color" *ngIf="
          item.tax_application !== 0 &&
          item.coupon_value !== '0.00' &&
          item.coupon_value !== 0
        ">
        <h6>كوبون خصم
          <span class="btn-static-secondary p-1 rounded">{{ invoices[0].invoice_summary.coupon_title
          }} </span>
        </h6>

        <h6>
          -
          <span *ngIf="couponType !== 'percentage'">
            {{ item.coupon_value }} {{ item.currency_symbol }}
          </span>
          <span *ngIf="couponType === 'percentage'">
            {{ item.coupon_value }} {{ item.currency_symbol }}
          </span>
        </h6>
      </div>
      <div class="d-flex justify-content-between px-2 mb-1" *ngIf="item.service_percentage">
        <h6> رسوم الخدمة <span class="main-color"> بنسبة {{item.service_percentage}} % </span></h6>
        <h6>
          <span>{{ item.service_fees }} {{ item.currency_symbol }}</span>
        </h6>
      </div>
      <div class="d-flex justify-content-between px-2 mb-1" *ngIf="item.delivery_fees">
        <h6>رسوم التوصيل</h6>
        <h6>
          <span>{{ item.delivery_fees }} {{ item.currency_symbol }}</span>
        </h6>
      </div>
      <div class="px-2 mb-1" *ngIf="item.tax_application">
        <h6>سعر الوجبات يشتمل على ضريبة القيمة المضافة</h6>
      </div>

      <div class="px-2 mb-1" *ngIf="!item.tax_application">
        <h6>
          تضاف ضريبة القيمة المضافة
          <span class="main-color"> بنسبة {{ item.tax_percentage }}% </span> بمعنى اخر
          {{ item.tax_value }} {{ item.currency_symbol }}
        </h6>
      </div>
      <div class="d-flex flex-column">
        <hr />

        <div class="d-flex justify-content-between px-2 mb-1">
          <h4 class="mb-0" style="font-weight: bold !important">
            المجموع الكلى
          </h4>

          <h6 class="fw-bold mb-0 fs-4">
            <!-- <span>{{ item.total_price }} {{ item.currency_symbol }}</span> -->
            <span>{{ invoices[0].invoice_summary.total_price}} {{ invoices[0].currency_symbol }}</span>
          </h6>
        </div>
      </div>

      <div class="text-center mb-1">
        <h5>شكرا لك علي وقتك وثقتك بنا</h5>
      </div>
    </div>
  </div>
</div>




<div id="printSection" class="bg_black printSection p-0 d-none">
  <div class="px-4 py-2 my-2" *ngFor="let item of branchDetails">
    <div class="text-center border-bottom-dotted mb-2">
      <div class="card-img">
        <img src="assets/images/logo.png" alt="مطعم الكوت" class="img-fluid" />
        @if (isFinal) {
        <p class="final bg_black">نهائي</p>
        }
      </div>

      <div class="d-flex justify-content-between align-items-center mb-0">
        <h6 style="font-size: 10px;">
          <small>
            الفرع: <span>{{ item.branch_name }}</span></small>
        </h6>
        <h6 style="font-size: 10px;">
          <small> <span>{{ date }} / {{ time }}</span></small>
        </h6>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-0">
        <h6 style="font-size: 10px;">
          <small><span><i class="fa-solid fa-map-pin ps-1"></i></span> <span>{{ item.branch_address }}</span></small>
        </h6>
        <h6 style="font-size: 10px;">
          <small><span><i class="fa-solid fa-phone-flip px-1"></i></span> <span>{{ item.branch_phone }}</span></small>
        </h6>

      </div>
      <div class="d-flex justify-content-between align-items-center mb-0  ">
        <h6 style="font-size: 10px;">
          <small>رقم الفاتورة: <span>{{ item.invoice_number }}</span></small>
        </h6>
        <h6 style="font-size: 10px;">
          <small>
            اسم الكاشير:
            <span><span class="px-1">{{ invoices[0].cashier_info.first_name }} </span>
              {{ invoices[0].cashier_info.last_name }}
            </span></small>
        </h6>
      </div>
      <hr style="  margin: 0.5rem 0 !important;
    color: inherit;
    border: 0;
    border-top: 2px solid black !important
    ;
    opacity: 1 !important;" />

      <div class="d-flex justify-content-between align-items-center">
        <p class="mb-0 mt-0 bg_black" style="font-size: 10px;">
          <span class="fw-bold bg_black">رقم الطلب :{{ item.order_number }}</span>
        </p>
        <p class="mb-0 mt-0 fw-bold bg_black" style="font-size: 10px;">
          <span class="fw-bold bg_black">نوع الطلب : {{ getOrderTypeLabel(invoices[0].order_type) }}</span>
        </p>

      </div>

      <div *ngIf="hasDineInOrder()">
        <!-- <h6>
          <span class="fw-bold">رقم الطلب:</span> {{ item?.order_number }}
        </h6> -->

        <h6 style="font-size: 10px;" class="bg_black">
          <span class="fw-bold" >رقم الطاولة:</span> {{ item.table_number }}
        </h6>
      </div>
    </div>

    <!-- Conditionally display client data for delivery orders -->
    <ng-container *ngIf="test && (!showPrices || showPrices)">
      <div class="client-data" *ngIf="isDeliveryOrder">
        <!-- <h6>
    رقم الطلب: <span>{{ branchDetails?.[0]?.order_number ?? 'لا يوجد' }}</span>
  </h6> -->
        <div class="d-flex justify-content-between align-items-center mb-0 fw-bold bg_black" style="font-size: 10px;">
          <h6 style="font-size: 10px;">
            اسم العميل:
            <span style="font-size: 10px;"> {{ addressDetails?.[0]?.client_name ?? 'لا يوجد' }}</span>
          </h6>
          <h6 style="font-size: 10px;">
            رقم التليفون:
            <span>{{ addressDetails?.[0]?.address_phone ?? 'لا يوجد' }}</span>
          </h6>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-0 fw-bold bg_black" style="font-size: 10px;">
          <h6 style="font-size: 10px;" class="bg_black">
            عنوان التوصيل:
            <span style="font-size: 10px;" > {{ addressDetails?.[0]?.client_address ?? 'لا يوجد' }}</span>
          </h6>
            <h6 style="font-size: 10px;" class="fw-bold bg_black"> 
          اسم الطيار:
          <span>{{ invoices?.[0]?.delivery_name && invoices[0].delivery_name.trim() !== '' ? invoices[0].delivery_name :
            'لا يوجد' }}</span>
        </h6>
       
        </div>

      
   <h6 style="font-size: 10px;" class="bg_black">
            تعليمات التوصيل:
            <span style="font-size: 10px;">{{ addressDetails?.[0]?.address_notes ?? 'لا يوجد' }}</span>
          </h6>

      </div>
    </ng-container>

    <table class="table table-bordered">
      <thead class="text-center">
        <tr>
          <th scope="col">الصنف</th>
          <th scope="col">الكمية</th>
          <th scope="col" *ngIf="test && (!showPrices || showPrices)">السعر</th>
          <th scope="col" *ngIf="test && (!showPrices || showPrices)">
            الاجمالي
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of orderDetails[0]">
          <td>
            <div>
              <div>
                <small class="fw-bold">{{ item.dish_name }}</small>
              </div>
              <div class="pe-2">{{ item.size }}</div>
              <div class="pe-2" *ngFor="let addon of item.addons">
                <small class="text-black fst-italic fw-semibold">- {{ addon.addon_name }}</small>
              </div>

            </div>
          </td>
          <td class="fw-bold">{{ item.quantity }}</td>
          <td class="fw-bold" *ngIf="test && (!showPrices || showPrices)">
            {{ item.total_dish_price / item.quantity | number }}
            {{ invoiceSummary[0].currency_symbol }}
          </td>
          <td class="fw-bold" *ngIf="test && (!showPrices || showPrices)">
            {{ item.total_dish_price | number }}
            {{ invoiceSummary[0].currency_symbol }}
          </td>
        </tr>
      </tbody>
    </table>

    <ng-container>
      <div class="total-data border-bottom-dotted mb-3" *ngFor="let item of invoiceSummary">
        <div *ngIf="showPrices && test">
          <div class="d-flex justify-content-between align-items-center bg_black" style="font-size: 13px;">
            <h6 class="fw-bold bg_black" style="font-size: 13px;">الاجمالي:</h6>
            <span class="fw-bold bg_black">{{ item.subtotal_price_before_coupon }} {{ item.currency_symbol }}</span>
          </div>
          <div class="d-flex justify-content-between  fw-bold" style="font-size: 13px;" *ngIf="
              item.tax_application !== 0 &&
              item.coupon_value !== '0.00' &&
              item.coupon_value !== 0
            ">
            <h6 class="bg_black">تخفيض:
              <span class="btn-static-secondary p-1 rounded bg_black">{{ invoices[0].invoice_summary.coupon_title
                }} </span>
            </h6>
            <span class="bg_black">- {{ item.coupon_value }} {{ item.currency_symbol }}</span>
          </div>
          <div class="d-flex justify-content-between fw-bold bg_black" *ngIf="item.service_percentage"
            style="font-size: 13px;">
            <h6 style="font-size: 13px;">
              الخدمة
              <span class=" bg_black " style="font-size: 13px;">
                ( {{ item.service_percentage }} % ) :
              </span>
            </h6>
            <span class="bg_black" style="font-size: 13px;">{{ item.service_fees }} {{ item.currency_symbol }}</span>
          </div>
          <div class="bg_black d-flex justify-content-between fw-bold mb-0" *ngIf="!item.tax_application"
            style="font-size: 13px;">
            <h6 style="font-size: 13px;">
              الضريبة
              <span class=" bg_black"> ({{ item.tax_percentage }}% ) :</span>

            </h6>
            <p class="bg_black" style="font-size: 13px;">{{ item.tax_value }} {{ item.currency_symbol }}</p>
          </div>
          <!-- Total price -->
          <ng-container *ngIf="test && (!showPrices || showPrices)">
            <div class=" bg_black total-price my-0" *ngFor="let item of invoiceSummary">
              <div class=" fw-bold  d-flex justify-content-between align-items-center">
                <h6 class="fw-bold" style="font-size: 14px;">المجموع الكلي:</h6>
                <p class="mt-2" style="font-size: 14px;">{{ item.total_price }} {{ item.currency_symbol }}</p>
              </div>
            </div>
          </ng-container>
        </div>
        <ng-container *ngIf="test && (!showPrices || showPrices)">
          <div *ngIf="hasDeliveryOrDineIn()" class="d-flex justify-content-between fw-bold bg_black">
            <h6>التوصيل:</h6>
            <span>{{ item.delivery_fees }} {{ item.currency_symbol }}</span>
          </div>
        </ng-container>

        <!-- Payment Method -->
        <ng-container *ngIf="test && (!showPrices || showPrices)">
          <div class="d-flex justify-content-between align-items-center fw-bold bg_black ">
            <div style="font-size: 12px;">
              <span class="mb-0">طريقة الدفع:</span>
              <span class="mb-0">
                {{
                invoices[0]?.transactions[0].payment_method === "credit"
                ? "أونلاين"
                : "كاش"
                }}
              </span>
            </div>
            <ng-container *ngIf="test && (!showPrices || showPrices)">
              <div style="font-size: 12px;">
                <span class="mb-0 fw-bold">حالة الدفع:</span>
                <span class="mb-0 fw-bold">
                  {{ paymentStatus === "paid" ? "مدفوعة" : "غير مدفوعة" }}
                </span>
              </div>
            </ng-container>
          </div>
        </ng-container>

        <div class="d-flex justify-content-between align-items-center">

          <!-- Cash - visa -->
          <div *ngIf="invoices[0].transactions.length > 1">
            <div *ngFor="let inv of invoices[0].transactions">
              <div class=" fw-bold" *ngIf="invoices[0].transactions[0].payment_status == 'paid'">
                <span style="font-size: 12px;" class="bg_black">
                  {{ inv.payment_method === "cash" ? " الكاش" : " الفيزا" }}
                </span>
                <span style="font-size: 12px;" class="bg_black">{{ inv.paid }} {{ invoices[0].currency_symbol }}</span>
              </div>
            </div>
          </div>
          <!-- Cash - visa -->
        </div>
        <ng-container *ngIf="test && (!showPrices || showPrices)">
          <!-- <div class="px-2 mb-1" *ngIf="!item.tax_application">
            <h6>
              تضاف ضريبة القيمة المضافة بنسبة
              <span class="main-color">{{ item.tax_percentage }}% </span> بمعنى
              اخر {{ item.tax_value }} {{ item.currency_symbol }}
            </h6>
          </div> -->

        </ng-container>
        <hr style="  margin: 0.5rem 0 !important;
    color: inherit;
    border: 0;
    border-top: 2px solid black !important
    ;
    opacity: 1 !important;" />


        <!-- Payment Status -->

        <div *ngIf="item.tax_application" class="include-tax d-flex justify-content-between fw-bold">
          <small> سعر الوجبات يشتمل على ضريبة القيمة المضافة </small>
        </div>
      </div>
    </ng-container>

    <h6 class="text-center my-3 bg_black">شكرا لثقتكم بخدمتنا</h6>

    <div class="card-img-qr d-flex justify-content-center align-items-center mb-3">
      <img src="assets/images/qrcode.png" alt="مطعم الكوت" class="img-fluid" />
    </div>

    <div class="tax-num text-center bg_black">
      <h6>الرقم الضريبي <span>675170532</span></h6>
    </div>
  </div>
</div>
<!-- Modal for successPillEdit -->
<div class="modal fade" id="successPillEdit" tabindex="-1" aria-labelledby="successPillEditLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body text-center p-5">
        <i class="fa-solid fa-circle-check text-success fs-1 pt-2"></i>
        <p class="fs-4 fw-bold pt-4"> تم الحفظ بنجاح </p>
      </div>
    </div>
  </div>
</div>
<app-confirm-dialog #printDialog (actionResult)="printInvoice($event)" [header]="'تأكيد'"
  message='هل هذه الطباعة النهائية؟' [acceptLabel]="'نعم'" [rejectLabel]="'لا'"></app-confirm-dialog> 
