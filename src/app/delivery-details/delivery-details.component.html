<!-- <pre>{{form.value | json}}</pre>  -->
 <div class="offline-status" *ngIf="!isOnline || offlineMessage || pendingSyncCount > 0">
  <!-- Ø±Ø³Ø§Ù„Ø© Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„ -->
  <div class="alert alert-warning mb-2" *ngIf="!isOnline">
    <i class="fas fa-wifi-slash me-2"></i>
    âš ï¸ Ø£Ù†Øª ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
  </div>
  
  <!-- Ø±Ø³Ø§Ù„Ø© Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
  <div class="alert alert-info mb-2" *ngIf="offlineMessage">
    <i class="fas fa-save me-2"></i>
    {{ offlineMessage }}
  </div>

  <!-- Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ù†ØªØ¸Ø±Ø© -->
  <div class="alert alert-secondary mb-2" *ngIf="pendingSyncCount > 0">
    <i class="fas fa-sync-alt me-2"></i>
    ğŸ“¦ Ù„Ø¯ÙŠÙƒ {{ pendingSyncCount }} Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
  </div>

  <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø­ÙØ¸ -->
  <div class="alert alert-success mb-2" *ngIf="isSavingOffline">
    <i class="fas fa-spinner fa-spin me-2"></i>
    ğŸ’¾ Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹...
  </div>
</div>
<section class="form-delivery">
  <form class="p-3" [formGroup]="form" (ngSubmit)="onSubmit()">
    <nav class="inner-header">
      <nav style="--bs-breadcrumb-divider: '>'" aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a [routerLink]="['/home']" routerLinkActive="active" class="text-decoration-none">
              Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            </a>
          </li>
          <li class="breadcrumb-item active">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„</li>
        </ol>
      </nav>
    </nav>
    <h4 class="fw-bold my-4">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h4>
    <div class="mb-3">
      <div class="mb-3 input-group">
        <span class="input-group-text" id="basic-addon1" *ngIf="form.get('client_name')?.value">Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ </span>
        <input type="text" class="form-control" placeholder=" Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ " formControlName="client_name" [ngClass]="{
              'has-value': form.get('client_name')?.value,
         }" />
      </div>

      <div *ngIf="submitted && form.controls['client_name'].invalid" class="invalid-feedback d-block text-danger small">
        <small
          *ngIf="form.controls['client_name']?.errors?.['required'] && (form.controls['client_name'].touched || submitted)"
          class="text-danger pt-3">
          Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨
        </small>

        <small *ngIf="clientName?.errors?.['pattern']">
          Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø³Ø§ÙØ§Øª ÙÙ‚Ø·
        </small>

        <div *ngIf="form.controls['client_name']?.errors?.['serverError']"
          class="invalid-feedback d-block text-danger small">
          {{ form.controls['client_name'].errors?.['serverError'] }}
        </div>
      </div>
    </div>
    <div class="d-flex gap-2 align-items-start">
      <div class="w-50">
        <div class="">
          <div class="mb-3 input-group">
            <span class="input-group-text" id="basic-addon1" *ngIf="form.get('address_phone')?.value">Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„
            </span>
            <input type="text" class="form-control text-end" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"
              formControlName="address_phone" [ngClass]="{
              'has-value': form.get('address_phone')?.value,
         }" [ngClass]="{
          'is-invalid': (submitted || sumbitSearch) && addressPhone?.invalid
        }" />
          </div>
          <small class="text-danger pt-5"
            *ngIf="addressPhone?.errors?.['required'] && (form.controls['address_phone'].touched || (submitted||sumbitSearch))">
            Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨
          </small>
          <div *ngIf="(submitted || sumbitSearch) && addressPhone?.invalid"
            class="invalid-feedback d-block text-danger small">
            <small *ngIf="addressPhone?.errors?.['leadingSpace']">
              Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ù…Ø³Ø§ÙØ©
            </small>
            <small *ngIf="addressPhone?.errors?.['pattern']">
              Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ {{ requiredPhoneLength }} Ø±Ù‚Ù… ÙÙ‚Ø·
            </small>
            <small *ngIf="addressPhone?.errors?.['serverError']">
              {{ addressPhone?.errors?.['serverError'] }}
            </small>
          </div>
        </div>
        <p class="text-danger">{{ phoneNotFound }}</p>
      </div>
      <div class="w-25">
        <!--   <div ngbDropdown class="custom-dropdown dropdown w-100">
          <div ngbDropdownToggle class="selected-option dropdown-toggle text-muted d-flex align-items-center justify-content-between"
            type="button"
            data-bs-toggle="dropdown" aria-expanded="false"  [ngClass]="{
            'is-invalid':
              (submitted || sumbitSearch) &&
              form.controls['country_code'].invalid
          }">
            <span class="px-1">{{ selectedCountry.code || "Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©" }}</span>
            <img *ngIf="selectedCountry?.flag" [src]="selectedCountry.flag" class="flag-icon" />
          </div>

          <ul ngbDropdownMenu  class="dropdown-list dropdown-menu show w-100">
            <li class="p-2">
              <input type="text" formControlName="searchTerm" (input)="filterCountries()" class="form-control"
                placeholder="Ø§Ø¨Ø­Ø«" />
            </li>
            <li ngbDropdownItem *ngFor="let country of filteredCountries" (click)="selectCountry(country)"
              class="d-flex justify-content-between text-muted p-2">
              {{ country?.code }}
              <img *ngIf="country?.flag" [src]="country.flag" class="flag-icon" />
            </li>
          </ul>
        </div> -->
        <div ngbDropdown class="custom-dropdown dropdown w-100">
          <div ngbDropdownToggle
            class="selected-option dropdown-toggle text-muted d-flex align-items-center justify-content-between"
            type="button" [ngClass]="{
      'is-invalid':
        (submitted || sumbitSearch) && form.controls['country_code'].invalid
    }">
            <span class="px-1">{{  form.controls['country_code'].value?.code || 'Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©' }}</span>
            <!-- <span class="px-1">{{ selectedCountry.code || 'Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©' }}</span> -->
            <img *ngIf="form.controls['country_code'].value" [src]="form.controls['country_code'].value?.flag||selectedCountry.flag" class="flag-icon" />
          </div>

          <ul ngbDropdownMenu class="dropdown-list dropdown-menu w-100">
            <li class="p-2">
              <input type="text" formControlName="searchTerm" (input)="filterCountries()" class="form-control"
                placeholder="Ø§Ø¨Ø­Ø«" />
            </li>
            <li *ngFor="let country of filteredCountries" (click)="selectCountry(country)"
              class="dropdown-item d-flex justify-content-between text-muted p-2">
              {{ country.code }}
              <img *ngIf="country.flag" [src]="country.flag" class="flag-icon" />
            </li>
          </ul>
        </div>


        <div *ngIf="
          (submitted || sumbitSearch) && form.controls['country_code']?.invalid
        " class="invalid-feedback d-block text-danger small">
          ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø©
        </div>
      </div>
      <div class="search w-25">
        <button type="button" class="w-100" (click)="searchPhoneNumber()" [disabled]="!searchPhoneLoading">
          <span class="btn form-control" *ngIf="searchPhoneLoading">Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</span>
          <span *ngIf="!searchPhoneLoading" class="loading-indicator">
            <span class="spinner"></span>
            Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...
          </span>
        </button>
      </div>

    </div>
    <div class="whatsapp">
      <div class="mb-3">
        <div class="d-flex align-items-center mb-1">
          <h6 class="mb-0">Ù‡Ù„ Ù‡Ø°Ø§ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ØŸ</h6>
          <a class="text-success fw-bold p-1 mx-2 text-decoration-underline" (click)="useSameWhatsapp(true)">Ù†Ø¹Ù…</a>
          <a class="text-danger fw-bold p-1 mx-2 text-decoration-underline" (click)="useSameWhatsapp(false)">Ù„Ø§</a>
        </div>
        <div *ngIf="submitted && form.controls['whatsapp_number'].invalid&& form.controls['whatsapp_number'].value==''"
          class="invalid-feedback d-block text-danger small">
          <small> Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ø°Ø§ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨</small>
        </div>
      </div>
      @if (!useSameNumberForWhatsapp) {
      <div class="mb-3 d-flex gap-2 align-items-start">
        <div class="w-75">
          <input type="text" class="form-control" formControlName="whatsapp_number" [(ngModel)]="whatsappPhone"
            placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨" />
          <div *ngIf="submitted && form.controls['whatsapp_number'].invalid"
            class="invalid-feedback d-block text-danger small">
            <div *ngIf="submitted && form.controls['whatsapp_number'].invalid"
              class="invalid-feedback d-block text-danger small">
              <small *ngIf=" form.controls['whatsapp_number']?.errors?.['required']">
                Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø·Ù„ÙˆØ¨
              </small>
              <small *ngIf="form.controls['whatsapp_number']?.errors?.['leadingSpace']">
                Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù…Ø³Ø§ÙØ©
              </small>
              <small *ngIf="form.controls['whatsapp_number']?.errors?.['pattern']">
                Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ {{whatsappNumberCode?.value?.phoneLength || selectedWhatsappCountry.phoneLength }} Ø±Ù‚Ù… ÙÙ‚Ø·
              </small>
            </div>
          </div>
        </div>
        <div class="w-25">
          <div ngbDropdown class="custom-dropdown dropdown w-100">
            <div ngbDropdownToggle
              class="selected-option dropdown-toggle text-muted d-flex align-items-center justify-content-between"
              type="button">
              <span class="px-1">{{  form.controls['whatsapp_number_code'].value?.code|| selectedWhatsappCountry.code||'Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©' }}</span>
              <!-- <span class="px-1">{{ form.controls['whatsapp_number_code'].value.code|| selectedWhatsappCountry.code||'Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©' }}</span> -->
              <img *ngIf=" form.controls['whatsapp_number_code']" [src]="form.controls['whatsapp_number_code'].value?.flag||selectedWhatsappCountry.flag" class="flag-icon" />
            </div>

            <ul ngbDropdownMenu class="dropdown-list dropdown-menu w-100">
              <li class="p-2">
                <input type="text" (input)="filterWhatsappCountries($event)" class="form-control" placeholder="Ø§Ø¨Ø­Ø«" />
              </li>
              <li *ngFor="let country of filteredWhatsappCountries" (click)="selectWhatsappCountry(country)"
                class="dropdown-item d-flex justify-content-between text-muted p-2">
                {{ country.code }}
                <img *ngIf="country.flag" [src]="country.flag" class="flag-icon" />
              </li>
            </ul>
          </div>
              <div *ngIf="
          (submitted || sumbitSearch) && form.controls['whatsapp_number_code']?.invalid
        " class="invalid-feedback d-block text-danger small">
          ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø©
        </div>
        </div>
      </div>
      }
    </div>

    <!-- <div class="search my-3">
    <span (click)="searchPhoneNumber()"> Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ </span>
  </div> -->
    @if(searchPhoneLoading==true){
    @if((selectedAddress||userStoredAddress) &&
    userAddNewAddress==false){
    <div class="mb-3">
      <app-select width="100%" [options]="userStoredAddress"   [control]="selectedAddressControl"
        placeholder="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„"></app-select>
    </div>
    }@else if(userAddNewAddress) {

    <h4 class="fw-bold my-3">Ø§Ø¶Ù Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„</h4>
    <div class="mb-3">
      <label for="area" class="form-label fw-bold">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
      <select class="form-select styled-select" formControlName="area_id" [ngClass]="{
        'is-invalid': submitted && form.controls['area_id'].invalid
      }">
        @for (area of areas; track area.id) {
        <option [value]="area.id">{{ area.name }}</option>
        }
      </select>

      <div *ngIf="submitted && form.controls['area_id'].invalid" class="invalid-feedback d-block text-danger small">
        <small>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</small>
      </div>
    </div>
    <input type="hidden" formControlName="address_type" />

    <ul class="delivery-places nav nav-pills px-0 mb-3" id="pills-tab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link rounded-pill active" type="button" [class.active]="selectedProperty === 'apartment'"
          (click)="selectPropertyType('apartment')">
          <i class="fas fa-city"></i> Ø´Ù‚Ø©
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link rounded-pill" type="button" [class.active]="selectedProperty === 'villa'"
          (click)="selectPropertyType('villa')">
          <i class="fas fa-home"></i> ÙÙŠÙ„Ø§
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link rounded-pill" type="button" [class.active]="selectedProperty === 'office'"
          (click)="selectPropertyType('office')">
          <i class="fas fa-building"></i> Ù…ÙƒØªØ¨
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link rounded-pill" type="button" [class.active]="selectedProperty === 'hotel'"
          (click)="selectPropertyType('hotel')">
          <i class="fa-solid fa-hotel px-1"></i> ÙÙ†Ø¯Ù‚
        </button>
      </li>
    </ul>
    <div class="text-danger small mt-1" *ngIf="submitted && form.controls['address_type'].invalid">
      <sup>*</sup> Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±
    </div>

    <div class="tab-content" id="pills-tabContent">
      <div *ngIf="selectedProperty === 'apartment'">
        <div>
          <div class="mb-3 input-group">
            <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('building')?.value">Ø§Ø¯Ø®Ù„
              Ø§Ù„Ù…Ø¨Ù†ÙŠ</span>
            <!--  -->
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('building')?.value,
              'is-invalid': submitted && building?.invalid
            }" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù†ÙŠ" formControlName="building"
              [ngClass]="{ 'is-invalid': submitted && building?.invalid }" />
          </div>

          <div *ngIf="submitted && building?.invalid" class="invalid-feedback d-block text-danger small">
            {{ getValidationMessage("building") }}
          </div>
        </div>

        <div class="mb-3 d-flex gap-2">
          <div class="flex-grow-1">
            <div class="mb-3 input-group">
              <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('apartment_number')?.value">
                Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©</span>
              <!--  -->
              <input type="text" class="form-control" [ngClass]="{
                'has-value': form.get('apartment_number')?.value
              }" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø´Ù‚Ø©" formControlName="apartment_number" [ngClass]="{
                'is-invalid': submitted && appartmentNumber?.invalid
              }" />
            </div>

            <div *ngIf="submitted && appartmentNumber?.invalid" class="invalid-feedback d-block text-danger small">
              {{ getValidationMessage("apartment_number") }}
            </div>
          </div>

          <div class="me-2">
            <div class="mb-3 input-group">
              <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('floor_number')?.value">
                Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¯ÙˆØ±
              </span>
              <input type="text" class="form-control" [ngClass]="{
                'has-value': form.get('floor_number')?.value
              }" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¯ÙˆØ±" formControlName="floor_number"
                [ngClass]="{ 'is-invalid': submitted && floorNumber?.invalid }" />
            </div>
            <div *ngIf="submitted && floorNumber?.invalid" class="invalid-feedback d-block text-danger small">
              {{ getValidationMessage("floor_number") }}
            </div>
          </div>
        </div>

        <div class="mb-3 position-relative">
          <div class="mb-3 input-group">
            <span class="input-group-text" id="basic-addon1" *ngIf="form.get('address')?.value">
              Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            </span>
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('address')?.value
            }" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† " formControlName="address"
              [ngClass]="{ 'is-invalid': submitted && address?.invalid }" />
          </div>
          <div *ngIf="submitted && address?.invalid" class="invalid-feedback d-block position-absolute" style="
            top: 100%;
            right: 0;
            width: max-content;
            white-space: nowrap;
            padding-inline-start: 5px;
          ">
            {{ getValidationMessage("address") }}
          </div>
        </div>

        <div class="my-5">
          <div class="mb-3 input-group">
            <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('notes')?.value">
              Ø¹Ù„Ø§Ù…Ø© Ù…Ù…ÙŠØ²Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
            </span>
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('notes')?.value
            }" placeholder="Ø¹Ù„Ø§Ù…Ø© Ù…Ù…ÙŠØ²Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" formControlName="notes" />
          </div>
        </div>
      </div>

      <div *ngIf="selectedProperty === 'villa'">
        <div class="mb-3">
          <div class="mb-3 input-group">
            <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('building')?.value">
              Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ÙÙŠÙ„Ø§
            </span>
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('building')?.value
            }" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ÙÙŠÙ„Ø§  " formControlName="building"
              [ngClass]="{ 'is-invalid': submitted && building?.invalid }" />
          </div>
          <div *ngIf="submitted && building?.invalid" class="invalid-feedback d-block text-danger small">
            {{ getValidationMessage("building") }}
          </div>
        </div>

        <div class="mb-3">
          <div class="mb-3 input-group">
            <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('apartment_number')?.value">
              Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ÙÙŠÙ„Ø§
            </span>
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('apartment_number')?.value
            }" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ÙÙŠÙ„Ø§  " formControlName="apartment_number"
              [ngClass]="{ 'is-invalid': submitted && appartmentNumber?.invalid }" />
          </div>
          <div *ngIf="submitted && appartmentNumber?.invalid" class="invalid-feedback d-block text-danger small">
            {{ getValidationMessage("apartment_number") }}
          </div>
        </div>

        <div class="mb-3 position-relative">
          <div class="mb-3 input-group">
            <span class="input-group-text " id="basic-addon1" *ngIf="form.get('address')?.value">
              Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            </span>
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('address')?.value
            }" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† " formControlName="address"
              [ngClass]="{ 'is-invalid': submitted && address?.invalid }" />
          </div>
          <div *ngIf="submitted && address?.invalid" class="invalid-feedback d-block position-absolute" style="
            top: 100%;
            right: 0;
            width: max-content;
            white-space: nowrap;
            padding-inline-start: 5px;
          ">
            {{ getValidationMessage("address") }}
          </div>
        </div>

        <div class="my-5">
          <div class="mb-3 input-group">
            <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('notes')?.value">
              Ø¹Ù„Ø§Ù…Ø© Ù…Ù…ÙŠØ²Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
            </span>
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('notes')?.value
            }" placeholder="Ø¹Ù„Ø§Ù…Ø© Ù…Ù…ÙŠØ²Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" formControlName="notes" />
          </div>
        </div>
      </div>
      <div *ngIf="selectedProperty === 'office'">
        <div class="mb-3">
          <div class="mb-3 input-group">
            <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('building')?.value">
              Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙƒØªØ¨
            </span>
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('building')?.value,
              'is-invalid': submitted && building?.invalid
            }" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙƒØªØ¨  " formControlName="building"
              [ngClass]="{ 'is-invalid': submitted && building?.invalid }" />
          </div>
        </div>
        <div *ngIf="submitted && building?.invalid" class="invalid-feedback d-block text-danger small">
          {{ getValidationMessage("building") }}
        </div>

        <div class="mb-3 d-flex gap-2">
          <div class="flex-grow-1">
            <div class="mb-3 input-group">
              <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('apartment_number')?.value">
                Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…ÙƒØªØ¨
              </span>
              <input type="text" class="form-control" [ngClass]="{
                'has-value': form.get('apartment_number')?.value,
                'is-invalid': submitted && building?.invalid
              }" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…ÙƒØªØ¨ " formControlName="apartment_number" [ngClass]="{
                'is-invalid': submitted && appartmentNumber?.invalid
              }" />
            </div>
            <div *ngIf="submitted && appartmentNumber?.invalid" class="invalid-feedback d-block text-danger small">
              {{ getValidationMessage("apartment_number") }}
            </div>
          </div>

          <div class="me-2">
            <div class="mb-3 input-group">
              <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('floor_number')?.value">
                Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¯ÙˆØ±
              </span>
              <input type="text" class="form-control" [ngClass]="{
                'has-value': form.get('floor_number')?.value,
                'is-invalid': submitted && building?.invalid
              }" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¯ÙˆØ±" formControlName="floor_number"
                [ngClass]="{ 'is-invalid': submitted && floorNumber?.invalid }" />
            </div>
            <div *ngIf="submitted && floorNumber?.invalid" class="invalid-feedback d-block text-danger small">
              {{ getValidationMessage("floor_number") }}
            </div>
          </div>
        </div>

        <div class="mb-3 position-relative">
          <div class="mb-3 input-group">
            <span class="input-group-text " id="basic-addon1" *ngIf="form.get('address')?.value">
              Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            </span>
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('address')?.value,
              'is-invalid': submitted && building?.invalid
            }" placeholder=" Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" formControlName="address"
              [ngClass]="{ 'is-invalid': submitted && address?.invalid }" />
          </div>
          <div *ngIf="submitted && address?.invalid" class="invalid-feedback d-block position-absolute" style="
            top: 100%;
            right: 0;
            width: max-content;
            white-space: nowrap;
            padding-inline-start: 5px;
          ">
            {{ getValidationMessage("address") }}
          </div>
        </div>

        <div class="my-5 position-relative">
          <div class="mb-3 input-group">
            <span class="input-group-text text-muted" id="basic-addon1" *ngIf="form.get('notes')?.value">
              Ø¹Ù„Ø§Ù…Ø© Ù…Ù…ÙŠØ²Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
            </span>
            <input type="text" class="form-control" [ngClass]="{
              'has-value': form.get('notes')?.value,
              'is-invalid': submitted && building?.invalid
            }" placeholder="Ø¹Ù„Ø§Ù…Ø© Ù…Ù…ÙŠØ²Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" formControlName="notes"
              [ngClass]="{ 'is-invalid': submitted && notes?.invalid }" />
          </div>
          <div *ngIf="submitted && notes?.invalid" class="invalid-feedback d-block position-absolute" style="
            top: 100%;
            right: 0;
            white-space: nowrap;
            padding-inline-start: 5px;
          ">
            {{ getValidationMessage("notes") }}
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="selectedProperty === 'hotel'">
      <div class="mb-3">

        <div ngbDropdown class="dropdown w-100 custom-dropdown">
          <button ngbDropdownToggle class="w-100 bg-transparent dropdown-toggle border-0 selected-option" type="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            <span *ngIf="!selectedHotel && !selectedAddress" class="text-muted"> Ø§Ø®ØªØ± Ø§Ù„ÙÙ†Ø¯Ù‚</span>
            <span *ngIf="selectedHotel">{{ selectedHotel.name }}</span>
          </button>
          <ul ngbDropdownMenu class="dropdown-menu dropdown-list">
            <li>
              <input type="text" formControlName="searchTermhotel" (input)="searchHotel()" class="w-100 form-control"
                placeholder="Ø§Ø¨Ø­Ø« ... " />
            </li>
            <li ngbDropdownItem class="dropdown-item" *ngFor="let hotel of hotels" (click)="onHotelChange(hotel)">
              {{ hotel.name }}
            </li>
            <!-- <li
            ngbDropdownItem
            class="dropdown-item"
            (click)="onHotelChange('another')"
          >
            Ø£Ø®Ø±ÙŠ
          </li> -->
          </ul>
        </div>
        <!--       <div class="my-3 position-relative" *ngIf="selectedHotel == 'another'">
        <div class="mb-3 input-group">
          <span
            class="input-group-text"
            id="basic-addon1"
            *ngIf="form.get('address')?.value"
          >
            Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
          </span>
          <input
            type="text"
            class="form-control"
            [ngClass]="{
              'has-value': form.get('address')?.value
            }"
            placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† "
            formControlName="address"
            [ngClass]="{ 'has-value': submitted && address?.invalid }"
          />
        </div>
        <div
          *ngIf="submitted && address?.invalid"
          class="invalid-feedback d-block position-absolute"
          style="
            top: 100%;
            right: 0;
            width: max-content;
            white-space: nowrap;
            padding-inline-start: 5px;
          "
        >
          {{ getValidationMessage("address") }}
        </div>
      </div> -->
        <div *ngIf="submitted && !selectedHotel" class="invalid-feedback d-block text-danger small">
          <small>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙ†Ø¯Ù‚</small>
        </div>
      </div>
    </div>
    }}

    <div class="d-flex justify-content-end">
      <button type="submit" class="btn py-2 px-5">Ø­ÙØ¸ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</button>
    </div>
  </form>
</section>
<!-- <app-confirm-dialog [display]="appearConfirmDialog" (actionResult)="addNewAddress($event)"></app-confirm-dialog> -->

<app-confirm-dialog #confirmDialog (actionResult)="addNewAddress($event)" [header]="'ØªØ£ÙƒÙŠØ¯'"
  [message]="'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯'" [acceptLabel]="'Ù†Ø¹Ù…'" [rejectLabel]="'Ù„Ø§'"></app-confirm-dialog>
